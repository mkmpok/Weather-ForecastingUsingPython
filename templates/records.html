<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Saved Records</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
  <a href="{{ url_for('index') }}" class="btn btn-link">&larr; Back</a>
  <h3>Saved Records</h3>
  <p>
    <a class="btn btn-outline-secondary" href="{{ url_for('export_all', fmt='csv') }}">Export CSV</a>
    <a class="btn btn-outline-secondary" href="{{ url_for('export_all', fmt='json') }}">Export JSON</a>
    <a class="btn btn-outline-secondary" href="{{ url_for('export_all', fmt='pdf') }}">Export PDF</a>
  </p>

  <table class="table table-striped">
    <thead><tr><th>ID</th><th>Created</th><th>Location</th><th>Range</th><th>Actions</th></tr></thead>
    <tbody>
      {% for r in records %}
        <tr>
          <td>{{ r.id }}</td>
          <td>{{ r.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>{{ r.location_text }}</td>
          <td>{{ r.start_date }} â†’ {{ r.end_date }}</td>
          <td>
            <a class="btn btn-sm btn-primary" href="{{ url_for('view_record', rec_id=r.id) }}">View</a>
            <a class="btn btn-sm btn-warning" href="{{ url_for('update_record', rec_id=r.id) }}">Edit</a>
            <form style="display:inline" method="POST" action="{{ url_for('delete_record', rec_id=r.id) }}" onsubmit="return confirm('Delete?')">
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          </td>
        </tr>
      {% else %}
        <tr><td colspan="5">No records yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>